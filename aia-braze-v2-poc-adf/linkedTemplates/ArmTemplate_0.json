{
	"$schema": "http://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
	"contentVersion": "1.0.0.0",
	"parameters": {
		"factoryName": {
			"type": "string",
			"metadata": "Data Factory name",
			"defaultValue": "aia-braze-v2-poc-adf"
		},
		"AzureFileSystemPackageStore_connectionString": {
			"type": "secureString",
			"metadata": "Secure string for 'connectionString' of 'AzureFileSystemPackageStore'"
		},
		"AzureFileSystemSSISLogs_connectionString": {
			"type": "secureString",
			"metadata": "Secure string for 'connectionString' of 'AzureFileSystemSSISLogs'"
		},
		"FileSystemPackageStore_password": {
			"type": "secureString",
			"metadata": "Secure string for 'password' of 'FileSystemPackageStore'"
		},
		"Synapse_AzureBlobStorage_connectionString": {
			"type": "secureString",
			"metadata": "Secure string for 'connectionString' of 'Synapse_AzureBlobStorage'"
		},
		"AzureKeyVault_properties_typeProperties_baseUrl": {
			"type": "string",
			"defaultValue": "https://aia-braze-v2-poc-akv.vault.azure.net/"
		},
		"FileSystemPackageStore_properties_typeProperties_host": {
			"type": "string",
			"defaultValue": "\\\\aiasqlinsightsstorage.file.core.windows.net\\ssispackagestore"
		},
		"FileSystemPackageStore_properties_typeProperties_userId": {
			"type": "string",
			"defaultValue": "Azure\\aiasqlinsightsstorage"
		},
		"Currents_SQLServer_properties_typeProperties_connectionString_secretName": {
			"type": "string",
			"defaultValue": "sqlServer-connString"
		},
		"Currents_Synapse_properties_typeProperties_connectionString_secretName": {
			"type": "string",
			"defaultValue": "synapse-connString"
		},
		"adfmetadata_properties_typeProperties_connectionString_secretName": {
			"type": "string",
			"defaultValue": "adfmetadata-connString"
		},
		"SSISAzureIntegrationRuntime_properties_typeProperties_ssisProperties_catalogInfo_catalogServerEndpoint": {
			"type": "string",
			"defaultValue": "aiasqlmisvr01.a1e189469806.database.windows.net"
		},
		"SSISAzureIntegrationRuntime_properties_typeProperties_ssisProperties_catalogInfo_catalogAdminUserName": {
			"type": "string",
			"defaultValue": "boor"
		},
		"SSISAzureIntegrationRuntime_properties_typeProperties_ssisProperties_catalogInfo_catalogAdminPassword": {
			"type": "secureString"
		}
	},
	"variables": {
		"factoryId": "[concat('Microsoft.DataFactory/factories/', parameters('factoryName'))]"
	},
	"resources": [
		{
			"name": "[concat(parameters('factoryName'), '/AzureFileSystemPackageStore')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"annotations": [],
				"type": "AzureFileStorage",
				"typeProperties": {
					"connectionString": "[parameters('AzureFileSystemPackageStore_connectionString')]",
					"fileShare": "ssispackagestore"
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/AzureFileSystemSSISLogs')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"annotations": [],
				"type": "AzureFileStorage",
				"typeProperties": {
					"connectionString": "[parameters('AzureFileSystemSSISLogs_connectionString')]",
					"fileShare": "ssislogs"
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/AzureKeyVault')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"annotations": [],
				"type": "AzureKeyVault",
				"typeProperties": {
					"baseUrl": "[parameters('AzureKeyVault_properties_typeProperties_baseUrl')]"
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/FileSystemPackageStore')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"annotations": [],
				"type": "FileServer",
				"typeProperties": {
					"host": "[parameters('FileSystemPackageStore_properties_typeProperties_host')]",
					"userId": "[parameters('FileSystemPackageStore_properties_typeProperties_userId')]",
					"password": {
						"type": "SecureString",
						"value": "[parameters('FileSystemPackageStore_password')]"
					}
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/Synapse_AzureBlobStorage')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"description": "Blob Storage account related to storing Synapse related metadata",
				"annotations": [],
				"type": "AzureBlobStorage",
				"typeProperties": {
					"connectionString": "[parameters('Synapse_AzureBlobStorage_connectionString')]"
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/CurrentsOnPremIntegrationRuntime')]",
			"type": "Microsoft.DataFactory/factories/integrationRuntimes",
			"apiVersion": "2018-06-01",
			"properties": {
				"type": "SelfHosted",
				"typeProperties": {}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/SSISAzureIntegrationRuntime-01')]",
			"type": "Microsoft.DataFactory/factories/integrationRuntimes",
			"apiVersion": "2018-06-01",
			"properties": {
				"type": "Managed",
				"description": "Integration Runtime in Canada Central",
				"typeProperties": {
					"computeProperties": {
						"location": "Canada Central",
						"nodeSize": "Standard_D1_v2",
						"numberOfNodes": 1,
						"maxParallelExecutionsPerNode": 4,
						"vNetProperties": {
							"vNetId": "/subscriptions/ce859648-30e1-4135-9d0f-8358aebfe789/resourceGroups/aia-sqlinsights-rg/providers/Microsoft.Network/virtualNetworks/aiacanadacentralvnet",
							"subnet": "ADF_IR_subnet"
						}
					},
					"ssisProperties": {
						"edition": "Standard",
						"licenseType": "BasePrice"
					}
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/SSISAzureIntegrationRuntime-02')]",
			"type": "Microsoft.DataFactory/factories/integrationRuntimes",
			"apiVersion": "2018-06-01",
			"properties": {
				"type": "Managed",
				"typeProperties": {
					"computeProperties": {
						"location": "Canada Central",
						"nodeSize": "Standard_D1_v2",
						"numberOfNodes": 1,
						"maxParallelExecutionsPerNode": 1,
						"vNetProperties": {
							"vNetId": "/subscriptions/ce859648-30e1-4135-9d0f-8358aebfe789/resourceGroups/aia-sqlinsights-rg/providers/Microsoft.Network/virtualNetworks/aiacanadacentralvnet",
							"subnet": "ADF_IR_Subnet_clone"
						}
					},
					"ssisProperties": {
						"edition": "Standard",
						"licenseType": "BasePrice"
					}
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/default')]",
			"type": "Microsoft.DataFactory/factories/managedVirtualNetworks",
			"apiVersion": "2018-06-01",
			"properties": {
				"preventDataExfiltration": false
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/3-DataLake_2_SQLMI_via_EmbeddedPackage')]",
			"type": "Microsoft.DataFactory/factories/pipelines",
			"apiVersion": "2018-06-01",
			"properties": {
				"activities": [
					{
						"name": "Execute SSIS package - Embedded Package",
						"type": "ExecuteSSISPackage",
						"dependsOn": [],
						"policy": {
							"timeout": "7.00:00:00",
							"retry": 0,
							"retryIntervalInSeconds": 30,
							"secureOutput": false,
							"secureInput": false
						},
						"userProperties": [],
						"typeProperties": {
							"packageLocation": {
								"type": "InlinePackage",
								"typeProperties": {
									"packagePassword": {
										"type": "SecureString",
										"value": "**********"
									},
									"packageName": "Package.dtsx",
									"packageContent": "VER001_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",
									"packageLastModifiedDate": "2021-03-30T10:04:45.787Z UTC-4:00"
								}
							},
							"environmentPath": null,
							"connectVia": {
								"referenceName": "SSISAzureIntegrationRuntime-02",
								"type": "IntegrationRuntimeReference"
							},
							"projectConnectionManagers": {},
							"packageConnectionManagers": {
								"DataLake": {
									"AccountKey": {
										"value": {
											"type": "AzureKeyVaultSecret",
											"store": {
												"referenceName": "AzureKeyVault",
												"type": "LinkedServiceReference"
											},
											"secretName": "SSIS-DataLake-AccountKey"
										}
									},
									"AccountName": {
										"value": "aiasqlinsightsstorage"
									},
									"AuthType": {
										"value": "1"
									},
									"ConnectByProxy": {
										"value": "False"
									},
									"ConnectUsingManagedIdentity": {
										"value": "False"
									},
									"ConnectionString": {
										"value": "ServiceType=AzureBlobFS;AccountName=aiasqlinsightsstorage;DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;"
									},
									"EndpointSuffix": {
										"value": "core.windows.net"
									},
									"SasToken": {
										"value": {
											"type": "SecureString",
											"value": "**********"
										}
									},
									"ServicePrincipalKey": {
										"value": {
											"type": "SecureString",
											"value": "**********"
										}
									},
									"ServiceType": {
										"value": "2"
									},
									"TargetServerVersion": {
										"value": "140"
									},
									"UseHttps": {
										"value": "True"
									}
								},
								"currents_ODBC": {
									"ConnectByProxy": {
										"value": "False"
									},
									"ConnectionString": {
										"value": "server=tcp:aiasqlmisvr01.a1e189469806.database.windows.net,1433;uid=boor;Driver={ODBC Driver 13 for SQL Server};database=currents;"
									},
									"InitialCatalog": {
										"value": "currents"
									},
									"Password": {
										"value": {
											"type": "AzureKeyVaultSecret",
											"store": {
												"referenceName": "AzureKeyVault",
												"type": "LinkedServiceReference"
											},
											"secretName": "SSIS-currents-Password"
										}
									},
									"RetainSameConnection": {
										"value": "False"
									},
									"ServerName": {
										"value": "tcp:aiasqlmisvr01.a1e189469806.database.windows.net,1433"
									},
									"UserName": {
										"value": "boor"
									}
								},
								"currents_OLEDB": {
									"ConnectByProxy": {
										"value": "False"
									},
									"ConnectUsingManagedIdentity": {
										"value": "False"
									},
									"ConnectionString": {
										"value": "Data Source=aiasqlmisvr01.a1e189469806.database.windows.net;User ID=boor;Initial Catalog=currents;Provider=SQLNCLI11.1;Persist Security Info=True;Auto Translate=False;"
									},
									"InitialCatalog": {
										"value": "currents"
									},
									"Password": {
										"value": {
											"type": "AzureKeyVaultSecret",
											"store": {
												"referenceName": "AzureKeyVault",
												"type": "LinkedServiceReference"
											},
											"secretName": "SSIS-currents-Password"
										}
									},
									"RetainSameConnection": {
										"value": "False"
									},
									"ServerName": {
										"value": "aiasqlmisvr01.a1e189469806.database.windows.net"
									},
									"UserName": {
										"value": "boor"
									}
								}
							}
						}
					}
				],
				"folder": {
					"name": "SSIS-Demo"
				},
				"annotations": []
			},
			"dependsOn": [
				"[concat(variables('factoryId'), '/integrationRuntimes/SSISAzureIntegrationRuntime-02')]",
				"[concat(variables('factoryId'), '/linkedServices/AzureKeyVault')]"
			]
		},
		{
			"name": "[concat(parameters('factoryName'), '/test_purview_over_ADF_SHIR_copy1')]",
			"type": "Microsoft.DataFactory/factories/pipelines",
			"apiVersion": "2018-06-01",
			"properties": {
				"description": "Calling Purview over Purview PE from ADF SHIR. Purview to Scan Storage Account over Private endpoint and ingest into Purview PE.",
				"activities": [
					{
						"name": "test_purview_over_shir",
						"type": "WebActivity",
						"dependsOn": [],
						"policy": {
							"timeout": "7.00:00:00",
							"retry": 0,
							"retryIntervalInSeconds": 30,
							"secureOutput": false,
							"secureInput": false
						},
						"userProperties": [],
						"typeProperties": {
							"url": {
								"value": "@concat('https://', pipeline().parameters.purview_account, '.scan.purview.azure.com/datasources/Braze-ADLS/scans?api-version=2020-12-01-preview')",
								"type": "Expression"
							},
							"connectVia": {
								"referenceName": "CurrentsOnPremIntegrationRuntime",
								"type": "IntegrationRuntimeReference"
							},
							"method": "GET",
							"headers": {},
							"authentication": {
								"type": "MSI",
								"resource": "https://purview.azure.net"
							}
						}
					},
					{
						"name": "get_scans",
						"type": "WebActivity",
						"dependsOn": [
							{
								"activity": "test_purview_over_shir",
								"dependencyConditions": [
									"Succeeded"
								]
							}
						],
						"policy": {
							"timeout": "7.00:00:00",
							"retry": 0,
							"retryIntervalInSeconds": 30,
							"secureOutput": false,
							"secureInput": false
						},
						"userProperties": [],
						"typeProperties": {
							"url": {
								"value": "@concat('https://', pipeline().parameters.purview_account, '.scan.purview.azure.com/datasources/Braze-ADLS/scans?api-version=2020-12-01-preview')",
								"type": "Expression"
							},
							"connectVia": {
								"referenceName": "CurrentsOnPremIntegrationRuntime",
								"type": "IntegrationRuntimeReference"
							},
							"method": "GET",
							"headers": {},
							"authentication": {
								"type": "MSI",
								"resource": "https://purview.azure.net"
							}
						}
					},
					{
						"name": "create_sample_scan",
						"type": "WebActivity",
						"dependsOn": [
							{
								"activity": "get_scans",
								"dependencyConditions": [
									"Succeeded"
								]
							}
						],
						"policy": {
							"timeout": "7.00:00:00",
							"retry": 0,
							"retryIntervalInSeconds": 30,
							"secureOutput": false,
							"secureInput": false
						},
						"userProperties": [],
						"typeProperties": {
							"url": {
								"value": "@concat('https://', pipeline().parameters.purview_account, '.scan.purview.azure.com/datasources/Braze-ADLS/scans/', pipeline().parameters.scan_name, '?api-version=2020-12-01-preview')",
								"type": "Expression"
							},
							"connectVia": {
								"referenceName": "CurrentsOnPremIntegrationRuntime",
								"type": "IntegrationRuntimeReference"
							},
							"method": "PUT",
							"headers": {},
							"body": {
								"value": "@concat('{\"name\":\"', pipeline().parameters.scan_name, '\",\"kind\":\"AdlsGen2Credential\",\"properties\":{\"connectedVia\":{\"referenceName\":\"IntegrationRuntime-aiadsvm01\"},\"credential\":{\"referenceName\":\"ADLS-Braze-SP-ClientKey\",\"credentialType\":\"ServicePrincipal\"},\"scanRulesetType\":\"System\",\"scanRulesetName\":\"AdlsGen2\"}}')",
								"type": "Expression"
							},
							"authentication": {
								"type": "MSI",
								"resource": "https://purview.azure.net"
							}
						}
					},
					{
						"name": "specify_options",
						"type": "WebActivity",
						"dependsOn": [
							{
								"activity": "create_sample_scan",
								"dependencyConditions": [
									"Succeeded"
								]
							}
						],
						"policy": {
							"timeout": "7.00:00:00",
							"retry": 0,
							"retryIntervalInSeconds": 30,
							"secureOutput": false,
							"secureInput": false
						},
						"userProperties": [],
						"typeProperties": {
							"url": {
								"value": "@concat('https://', pipeline().parameters.purview_account, '.scan.purview.azure.com/datasources/Braze-ADLS/scans/', pipeline().parameters.scan_name, '/filters/custom?api-version=2020-12-01-preview')",
								"type": "Expression"
							},
							"connectVia": {
								"referenceName": "CurrentsOnPremIntegrationRuntime",
								"type": "IntegrationRuntimeReference"
							},
							"method": "PUT",
							"headers": {},
							"body": {
								"value": "{\n   \"properties\":{\n      \"excludeUriPrefixes\":[\n         \"https://aiabrazev2pocadls.dfs.core.windows.net/landing\"\n      ],\n      \"includeUriPrefixes\":[\n         \"https://aiabrazev2pocadls.dfs.core.windows.net/\",\n         \"https://aiabrazev2pocadls.dfs.core.windows.net/bronze\"\n      ]\n   }\n}",
								"type": "Expression"
							},
							"authentication": {
								"type": "MSI",
								"resource": "https://purview.azure.net"
							}
						}
					},
					{
						"name": "start_scan",
						"type": "WebActivity",
						"dependsOn": [
							{
								"activity": "specify_options",
								"dependencyConditions": [
									"Succeeded"
								]
							}
						],
						"policy": {
							"timeout": "7.00:00:00",
							"retry": 0,
							"retryIntervalInSeconds": 30,
							"secureOutput": false,
							"secureInput": false
						},
						"userProperties": [],
						"typeProperties": {
							"url": {
								"value": "@concat('https://', pipeline().parameters.purview_account, '.scan.purview.azure.com/datasources/Braze-ADLS/scans/', pipeline().parameters.scan_name, '/run?api-version=2020-12-01-preview')",
								"type": "Expression"
							},
							"connectVia": {
								"referenceName": "CurrentsOnPremIntegrationRuntime",
								"type": "IntegrationRuntimeReference"
							},
							"method": "POST",
							"headers": {},
							"body": {
								"scanLevel": "Full"
							},
							"authentication": {
								"type": "MSI",
								"resource": "https://purview.azure.net"
							}
						}
					}
				],
				"parameters": {
					"purview_account": {
						"type": "string",
						"defaultValue": "aia-purview"
					},
					"scan_name": {
						"type": "string",
						"defaultValue": "Scan-08"
					}
				},
				"folder": {
					"name": "Purview-SHIR-demonstration"
				},
				"annotations": []
			},
			"dependsOn": [
				"[concat(variables('factoryId'), '/integrationRuntimes/CurrentsOnPremIntegrationRuntime')]"
			]
		},
		{
			"name": "[concat(parameters('factoryName'), '/AzureDatabricks')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"annotations": [],
				"type": "AzureDatabricks",
				"typeProperties": {
					"domain": "https://adb-8059003163767180.0.azuredatabricks.net",
					"accessToken": {
						"type": "AzureKeyVaultSecret",
						"store": {
							"referenceName": "AzureKeyVault",
							"type": "LinkedServiceReference"
						},
						"secretName": "adb-token"
					},
					"existingClusterId": "1116-225432-pecks336"
				}
			},
			"dependsOn": [
				"[concat(variables('factoryId'), '/linkedServices/AzureKeyVault')]"
			]
		},
		{
			"name": "[concat(parameters('factoryName'), '/Currents_SQLServer')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"annotations": [],
				"type": "SqlServer",
				"typeProperties": {
					"connectionString": {
						"type": "AzureKeyVaultSecret",
						"store": {
							"referenceName": "AzureKeyVault",
							"type": "LinkedServiceReference"
						},
						"secretName": "[parameters('Currents_SQLServer_properties_typeProperties_connectionString_secretName')]"
					}
				},
				"connectVia": {
					"referenceName": "CurrentsOnPremIntegrationRuntime",
					"type": "IntegrationRuntimeReference"
				}
			},
			"dependsOn": [
				"[concat(variables('factoryId'), '/integrationRuntimes/CurrentsOnPremIntegrationRuntime')]",
				"[concat(variables('factoryId'), '/linkedServices/AzureKeyVault')]"
			]
		},
		{
			"name": "[concat(parameters('factoryName'), '/Currents_Synapse')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"annotations": [],
				"type": "AzureSqlDW",
				"typeProperties": {
					"connectionString": {
						"type": "AzureKeyVaultSecret",
						"store": {
							"referenceName": "AzureKeyVault",
							"type": "LinkedServiceReference"
						},
						"secretName": "[parameters('Currents_Synapse_properties_typeProperties_connectionString_secretName')]"
					}
				}
			},
			"dependsOn": [
				"[concat(variables('factoryId'), '/linkedServices/AzureKeyVault')]"
			]
		},
		{
			"name": "[concat(parameters('factoryName'), '/adfmetadata')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"annotations": [],
				"type": "AzureSqlDatabase",
				"typeProperties": {
					"connectionString": {
						"type": "AzureKeyVaultSecret",
						"store": {
							"referenceName": "AzureKeyVault",
							"type": "LinkedServiceReference"
						},
						"secretName": "[parameters('adfmetadata_properties_typeProperties_connectionString_secretName')]"
					}
				}
			},
			"dependsOn": [
				"[concat(variables('factoryId'), '/linkedServices/AzureKeyVault')]"
			]
		},
		{
			"name": "[concat(parameters('factoryName'), '/ManagedintegrationRuntime')]",
			"type": "Microsoft.DataFactory/factories/integrationRuntimes",
			"apiVersion": "2018-06-01",
			"properties": {
				"type": "Managed",
				"typeProperties": {
					"computeProperties": {
						"location": "Canada Central",
						"dataFlowProperties": {
							"computeType": "General",
							"coreCount": 8,
							"timeToLive": 240,
							"cleanup": false
						}
					}
				},
				"managedVirtualNetwork": {
					"type": "ManagedVirtualNetworkReference",
					"referenceName": "default"
				}
			},
			"dependsOn": [
				"[concat(variables('factoryId'), '/managedVirtualNetworks/default')]"
			]
		},
		{
			"name": "[concat(parameters('factoryName'), '/SSISAzureIntegrationRuntime')]",
			"type": "Microsoft.DataFactory/factories/integrationRuntimes",
			"apiVersion": "2018-06-01",
			"properties": {
				"type": "Managed",
				"typeProperties": {
					"computeProperties": {
						"location": "East US",
						"nodeSize": "Standard_D1_v2",
						"numberOfNodes": 1,
						"maxParallelExecutionsPerNode": 8,
						"vNetProperties": {
							"vNetId": "/subscriptions/ce859648-30e1-4135-9d0f-8358aebfe789/resourceGroups/aia-sqlinsights-rg/providers/Microsoft.Network/virtualNetworks/aiatelegrafvnet",
							"subnet": "ADF_IR_subnet"
						}
					},
					"ssisProperties": {
						"catalogInfo": {
							"catalogServerEndpoint": "[parameters('SSISAzureIntegrationRuntime_properties_typeProperties_ssisProperties_catalogInfo_catalogServerEndpoint')]",
							"catalogAdminUserName": "[parameters('SSISAzureIntegrationRuntime_properties_typeProperties_ssisProperties_catalogInfo_catalogAdminUserName')]",
							"catalogAdminPassword": {
								"type": "SecureString",
								"value": "[parameters('SSISAzureIntegrationRuntime_properties_typeProperties_ssisProperties_catalogInfo_catalogAdminPassword')]"
							},
							"catalogPricingTier": null
						},
						"edition": "Standard",
						"licenseType": "BasePrice",
						"packageStores": [
							{
								"name": "myAzureFilesPackageStore",
								"packageStoreLinkedService": {
									"referenceName": "AzureFileSystemPackageStore",
									"type": "LinkedServiceReference"
								}
							},
							{
								"name": "myFileSystemPackageStore",
								"packageStoreLinkedService": {
									"referenceName": "FileSystemPackageStore",
									"type": "LinkedServiceReference"
								}
							}
						]
					}
				}
			},
			"dependsOn": [
				"[concat(variables('factoryId'), '/linkedServices/AzureFileSystemPackageStore')]",
				"[concat(variables('factoryId'), '/linkedServices/FileSystemPackageStore')]"
			]
		},
		{
			"name": "[concat(parameters('factoryName'), '/4-AE_and_DataLake_2_SQLMI_via_EmbeddedPackage_copy1')]",
			"type": "Microsoft.DataFactory/factories/pipelines",
			"apiVersion": "2018-06-01",
			"properties": {
				"activities": [
					{
						"name": "Execute SSIS package - Embedded Package",
						"type": "ExecuteSSISPackage",
						"dependsOn": [],
						"policy": {
							"timeout": "7.00:00:00",
							"retry": 0,
							"retryIntervalInSeconds": 30,
							"secureOutput": false,
							"secureInput": false
						},
						"userProperties": [],
						"typeProperties": {
							"packageLocation": {
								"type": "InlinePackage",
								"typeProperties": {
									"packagePassword": {
										"type": "SecureString",
										"value": "acntorPRESTO!"
									},
									"packageName": "Package.dtsx",
									"packageContent": "VER001_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",
									"packageLastModifiedDate": "2021-06-08T18:22:19.753Z UTC-4:00"
								}
							},
							"environmentPath": null,
							"connectVia": {
								"referenceName": "SSISAzureIntegrationRuntime-02",
								"type": "IntegrationRuntimeReference"
							},
							"projectConnectionManagers": {},
							"packageConnectionManagers": {
								"DataLake": {
									"AccountKey": {
										"value": {
											"type": "AzureKeyVaultSecret",
											"store": {
												"referenceName": "AzureKeyVault",
												"type": "LinkedServiceReference"
											},
											"secretName": "SSIS-DataLake-AccountKey"
										}
									},
									"AccountName": {
										"value": "aiasqlinsightsstorage"
									},
									"AuthType": {
										"value": "1"
									},
									"ConnectByProxy": {
										"value": "False"
									},
									"ConnectUsingManagedIdentity": {
										"value": "False"
									},
									"ConnectionString": {
										"value": "ServiceType=AzureBlobFS;AccountName=aiasqlinsightsstorage;DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;"
									},
									"EndpointSuffix": {
										"value": "core.windows.net"
									},
									"SasToken": {
										"value": {
											"type": "SecureString",
											"value": "**********"
										}
									},
									"ServicePrincipalKey": {
										"value": {
											"type": "SecureString",
											"value": "**********"
										}
									},
									"ServiceType": {
										"value": "2"
									},
									"TargetServerVersion": {
										"value": "140"
									},
									"UseHttps": {
										"value": "True"
									}
								},
								"currents_ODBC": {
									"ConnectByProxy": {
										"value": "False"
									},
									"ConnectionString": {
										"value": "server=tcp:aiasqlmisvr01.a1e189469806.database.windows.net,1433;uid=boor;Driver={ODBC Driver 13 for SQL Server};database=currents;"
									},
									"InitialCatalog": {
										"value": "currents"
									},
									"Password": {
										"value": {
											"type": "AzureKeyVaultSecret",
											"store": {
												"referenceName": "AzureKeyVault",
												"type": "LinkedServiceReference"
											},
											"secretName": "SSIS-currents-Password"
										}
									},
									"RetainSameConnection": {
										"value": "False"
									},
									"ServerName": {
										"value": "tcp:aiasqlmisvr01.a1e189469806.database.windows.net,1433"
									},
									"UserName": {
										"value": "boor"
									}
								},
								"currents_OLEDB": {
									"ConnectByProxy": {
										"value": "False"
									},
									"ConnectUsingManagedIdentity": {
										"value": "False"
									},
									"ConnectionString": {
										"value": "Data Source=aiasqlmisvr01.a1e189469806.database.windows.net;User ID=boor;Initial Catalog=currents;Provider=SQLNCLI11.1;Persist Security Info=True;Auto Translate=False;"
									},
									"InitialCatalog": {
										"value": "currents"
									},
									"Password": {
										"value": {
											"type": "AzureKeyVaultSecret",
											"store": {
												"referenceName": "AzureKeyVault",
												"type": "LinkedServiceReference"
											},
											"secretName": "SSIS-currents-Password"
										}
									},
									"RetainSameConnection": {
										"value": "False"
									},
									"ServerName": {
										"value": "aiasqlmisvr01.a1e189469806.database.windows.net"
									},
									"UserName": {
										"value": "boor"
									}
								}
							}
						}
					}
				],
				"folder": {
					"name": "SSIS-Demo"
				},
				"annotations": []
			},
			"dependsOn": [
				"[concat(variables('factoryId'), '/integrationRuntimes/SSISAzureIntegrationRuntime-02')]",
				"[concat(variables('factoryId'), '/linkedServices/AzureKeyVault')]"
			]
		},
		{
			"name": "[concat(parameters('factoryName'), '/1-DataLake_2_SQLMI_via_SSISDB')]",
			"type": "Microsoft.DataFactory/factories/pipelines",
			"apiVersion": "2018-06-01",
			"properties": {
				"activities": [
					{
						"name": "Execute SSIS package - SSISDB",
						"description": "Data Lake to SQL MI",
						"type": "ExecuteSSISPackage",
						"dependsOn": [],
						"policy": {
							"timeout": "7.00:00:00",
							"retry": 0,
							"retryIntervalInSeconds": 30,
							"secureOutput": false,
							"secureInput": false
						},
						"userProperties": [],
						"typeProperties": {
							"packageLocation": {
								"packagePath": "LoadFromDataLake/Azure-LoadingFilesFromDataLake01/Package.dtsx",
								"type": "SSISDB"
							},
							"environmentPath": null,
							"connectVia": {
								"referenceName": "SSISAzureIntegrationRuntime",
								"type": "IntegrationRuntimeReference"
							},
							"loggingLevel": "Basic",
							"projectConnectionManagers": {},
							"packageConnectionManagers": {}
						}
					}
				],
				"folder": {
					"name": "SSIS-Demo"
				},
				"annotations": [],
				"lastPublishTime": "2021-03-29T12:31:42Z"
			},
			"dependsOn": [
				"[concat(variables('factoryId'), '/integrationRuntimes/SSISAzureIntegrationRuntime')]"
			]
		},
		{
			"name": "[concat(parameters('factoryName'), '/2-DataLake_2_SQLMI_via_FileSystem')]",
			"type": "Microsoft.DataFactory/factories/pipelines",
			"apiVersion": "2018-06-01",
			"properties": {
				"activities": [
					{
						"name": "Execute SSIS package - FileSystem",
						"type": "ExecuteSSISPackage",
						"dependsOn": [],
						"policy": {
							"timeout": "7.00:00:00",
							"retry": 0,
							"retryIntervalInSeconds": 30,
							"secureOutput": false,
							"secureInput": false
						},
						"userProperties": [],
						"typeProperties": {
							"packageLocation": {
								"type": "PackageStore",
								"packagePath": "myFileSystemPackageStore/Azure-LoadingFilesFromDataLake01\\Package",
								"typeProperties": {
									"packagePassword": {
										"type": "SecureString",
										"value": "**********"
									}
								}
							},
							"connectVia": {
								"referenceName": "SSISAzureIntegrationRuntime",
								"type": "IntegrationRuntimeReference"
							},
							"projectConnectionManagers": {},
							"packageConnectionManagers": {
								"DataLake": {
									"AccountKey": {
										"value": {
											"type": "AzureKeyVaultSecret",
											"store": {
												"referenceName": "AzureKeyVault",
												"type": "LinkedServiceReference"
											},
											"secretName": "SSIS-DataLake-AccountKey"
										}
									},
									"AccountName": {
										"value": "aiasqlinsightsstorage"
									},
									"AuthType": {
										"value": "1"
									},
									"ConnectByProxy": {
										"value": "False"
									},
									"ConnectUsingManagedIdentity": {
										"value": "False"
									},
									"ConnectionString": {
										"value": "ServiceType=AzureBlobFS;AccountName=aiasqlinsightsstorage;DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;"
									},
									"EndpointSuffix": {
										"value": "core.windows.net"
									},
									"SasToken": {
										"value": {
											"type": "SecureString",
											"value": "**********"
										}
									},
									"ServicePrincipalKey": {
										"value": {
											"type": "SecureString",
											"value": "**********"
										}
									},
									"ServiceType": {
										"value": "2"
									},
									"TargetServerVersion": {
										"value": "140"
									},
									"UseHttps": {
										"value": "True"
									}
								},
								"currents_ODBC": {
									"ConnectByProxy": {
										"value": "False"
									},
									"ConnectionString": {
										"value": "server=tcp:aiasqlmisvr01.a1e189469806.database.windows.net,1433;uid=boor;Driver={ODBC Driver 13 for SQL Server};database=currents;"
									},
									"InitialCatalog": {
										"value": "currents"
									},
									"Password": {
										"value": {
											"type": "AzureKeyVaultSecret",
											"store": {
												"referenceName": "AzureKeyVault",
												"type": "LinkedServiceReference"
											},
											"secretName": "SSIS-currents-Password"
										}
									},
									"RetainSameConnection": {
										"value": "False"
									},
									"ServerName": {
										"value": "tcp:aiasqlmisvr01.a1e189469806.database.windows.net,1433"
									},
									"UserName": {
										"value": "boor"
									}
								},
								"currents_OLEDB": {
									"ConnectByProxy": {
										"value": "False"
									},
									"ConnectUsingManagedIdentity": {
										"value": "False"
									},
									"ConnectionString": {
										"value": "Data Source=aiasqlmisvr01.a1e189469806.database.windows.net;User ID=boor;Initial Catalog=currents;Provider=SQLNCLI11.1;Persist Security Info=True;Auto Translate=False;"
									},
									"InitialCatalog": {
										"value": "currents"
									},
									"Password": {
										"value": {
											"type": "AzureKeyVaultSecret",
											"store": {
												"referenceName": "AzureKeyVault",
												"type": "LinkedServiceReference"
											},
											"secretName": "SSIS-currents-Password"
										}
									},
									"RetainSameConnection": {
										"value": "False"
									},
									"ServerName": {
										"value": "aiasqlmisvr01.a1e189469806.database.windows.net"
									},
									"UserName": {
										"value": "boor"
									}
								}
							}
						}
					}
				],
				"folder": {
					"name": "SSIS-Demo"
				},
				"annotations": []
			},
			"dependsOn": [
				"[concat(variables('factoryId'), '/integrationRuntimes/SSISAzureIntegrationRuntime')]",
				"[concat(variables('factoryId'), '/linkedServices/AzureKeyVault')]"
			]
		}
	]
}